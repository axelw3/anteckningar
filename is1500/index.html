
<!doctype html>
<html lang="sv" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../dd1366/">
      
      
        <link rel="next" href="../sf1547/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.48">
    
    
      
        <title>IS1500 Datorteknik och komponenter 9,0 hp - Anteckningar</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6f8fc17f.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/styles.css">
    
      <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#is1500-datorteknik-och-komponenter-90-hp" class="md-skip">
          Gå till innehållet
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Sidhuvud">
    <a href=".." title="Anteckningar" class="md-header__button md-logo" aria-label="Anteckningar" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Anteckningar
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              IS1500 Datorteknik och komponenter 9,0 hp
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Sök" placeholder="Sök" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Sök">
        
        <button type="reset" class="md-search__icon md-icon" title="Rensa" aria-label="Rensa" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initialiserar sök
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Anteckningar" class="md-nav__button md-logo" aria-label="Anteckningar" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Anteckningar
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Start
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../bma110/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BMA110 Grundläggande sår och sårbehandling 3,0 hp
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../dd1351/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DD1351 Logik för dataloger 7,5 hp
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../dd1366-syntax/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dd1366 syntax
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../dd1366/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DD1366 Programmeringsparadigm 6,0 hp
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    IS1500 Datorteknik och komponenter 9,0 hp
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    IS1500 Datorteknik och komponenter 9,0 hp
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Innehållsförteckning">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Innehållsförteckning
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#forelasning-1-inledning" class="md-nav__link">
    <span class="md-ellipsis">
      Föreläsning 1: Inledning
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Föreläsning 1: Inledning">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bakgrund" class="md-nav__link">
    <span class="md-ellipsis">
      Bakgrund
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spraket-c" class="md-nav__link">
    <span class="md-ellipsis">
      Språket C
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Språket C">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bestandsdelar" class="md-nav__link">
    <span class="md-ellipsis">
      Beståndsdelar
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forelasning-2-assembly" class="md-nav__link">
    <span class="md-ellipsis">
      Föreläsning 2: Assembly
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Föreläsning 2: Assembly">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instruktionsuppsattning-isa" class="md-nav__link">
    <span class="md-ellipsis">
      Instruktionsuppsättning (ISA)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Instruktionsuppsättning (ISA)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ciscrisc" class="md-nav__link">
    <span class="md-ellipsis">
      CISC/RISC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#risc-v-register" class="md-nav__link">
    <span class="md-ellipsis">
      RISC-V: Register
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#endianness" class="md-nav__link">
    <span class="md-ellipsis">
      Endianness
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#risc-v-assembly" class="md-nav__link">
    <span class="md-ellipsis">
      RISC-V: Assembly
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RISC-V: Assembly">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#logiska-instruktioner" class="md-nav__link">
    <span class="md-ellipsis">
      Logiska instruktioner
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tilldela-32-bitarstal" class="md-nav__link">
    <span class="md-ellipsis">
      Tilldela 32-bitarstal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rars" class="md-nav__link">
    <span class="md-ellipsis">
      RARS
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forelasning-3-maskinkod" class="md-nav__link">
    <span class="md-ellipsis">
      Föreläsning 3: Maskinkod
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Föreläsning 3: Maskinkod">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bytes-nibbles-och-ord" class="md-nav__link">
    <span class="md-ellipsis">
      Bytes, nibbles och ord
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#twos-complement" class="md-nav__link">
    <span class="md-ellipsis">
      Two's complement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#risc-v-typer-av-instruktioner" class="md-nav__link">
    <span class="md-ellipsis">
      RISC-V: Typer av instruktioner
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RISC-V: Typer av instruktioner">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#register-instruktioner-r" class="md-nav__link">
    <span class="md-ellipsis">
      Register-instruktioner (R)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#immediate-instruktioner-i" class="md-nav__link">
    <span class="md-ellipsis">
      Immediate-instruktioner (I)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Immediate-instruktioner (I)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#shift-immediate-instruktioner" class="md-nav__link">
    <span class="md-ellipsis">
      Shift immediate-instruktioner
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#store-instruktioner-s" class="md-nav__link">
    <span class="md-ellipsis">
      Store-instruktioner (S)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#branch-instruktioner-b" class="md-nav__link">
    <span class="md-ellipsis">
      Branch-instruktioner (B)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upper-immediate-instruktioner-u" class="md-nav__link">
    <span class="md-ellipsis">
      Upper immediate-instruktioner (U)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jump-instruktioner-j" class="md-nav__link">
    <span class="md-ellipsis">
      Jump-instruktioner (J)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stack-minne" class="md-nav__link">
    <span class="md-ellipsis">
      Stack-minne
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forelasning-4-c" class="md-nav__link">
    <span class="md-ellipsis">
      Föreläsning 4: C
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Föreläsning 4: C">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pointer-aritmetik" class="md-nav__link">
    <span class="md-ellipsis">
      Pointer-aritmetik
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forelasning-5-io-system-12" class="md-nav__link">
    <span class="md-ellipsis">
      Föreläsning 5: I/O-system (1/2)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Föreläsning 5: I/O-system (1/2)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bussar" class="md-nav__link">
    <span class="md-ellipsis">
      Bussar
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bussar">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#synkron-buss" class="md-nav__link">
    <span class="md-ellipsis">
      Synkron buss
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asynkron-buss" class="md-nav__link">
    <span class="md-ellipsis">
      Asynkron buss
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#direkt-minnesatkomst-dma" class="md-nav__link">
    <span class="md-ellipsis">
      Direkt minnesåtkomst (DMA)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forelasning-6-io-system-22" class="md-nav__link">
    <span class="md-ellipsis">
      Föreläsning 6: I/O-system (2/2)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Föreläsning 6: I/O-system (2/2)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parallellseriell-kommunikation" class="md-nav__link">
    <span class="md-ellipsis">
      Parallell/seriell kommunikation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#undantag-och-avbrott" class="md-nav__link">
    <span class="md-ellipsis">
      Undantag och avbrott
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Undantag och avbrott">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aktivera-avbrott" class="md-nav__link">
    <span class="md-ellipsis">
      Aktivera avbrott
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forelasning-7-kombinationslogik" class="md-nav__link">
    <span class="md-ellipsis">
      Föreläsning 7: Kombinationslogik
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Föreläsning 7: Kombinationslogik">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#logiska-grindar" class="md-nav__link">
    <span class="md-ellipsis">
      Logiska grindar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#boolesk-algebra" class="md-nav__link">
    <span class="md-ellipsis">
      Boolesk algebra
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kombinationskretsar" class="md-nav__link">
    <span class="md-ellipsis">
      Kombinationskretsar
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Kombinationskretsar">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#multiplexrar-och-avkodare" class="md-nav__link">
    <span class="md-ellipsis">
      Multiplexrar och avkodare
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aritmetik" class="md-nav__link">
    <span class="md-ellipsis">
      Aritmetik
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Aritmetik">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adderare" class="md-nav__link">
    <span class="md-ellipsis">
      Adderare
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#carry-propagate-adder-cpa" class="md-nav__link">
    <span class="md-ellipsis">
      Carry propagate adder (CPA)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timing" class="md-nav__link">
    <span class="md-ellipsis">
      Timing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Timing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#glitchar" class="md-nav__link">
    <span class="md-ellipsis">
      Glitchar
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forelasning-8-sekventiell-logik" class="md-nav__link">
    <span class="md-ellipsis">
      Föreläsning 8: Sekventiell logik
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Föreläsning 8: Sekventiell logik">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sr-vippa-sr-latch" class="md-nav__link">
    <span class="md-ellipsis">
      SR-vippa (SR latch)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d-latch" class="md-nav__link">
    <span class="md-ellipsis">
      D latch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flip-flops" class="md-nav__link">
    <span class="md-ellipsis">
      Flip-flops
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Flip-flops">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#d-vippa-d-flip-flop" class="md-nav__link">
    <span class="md-ellipsis">
      D-vippa (D flip-flop)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resettableenabled-flip-flops" class="md-nav__link">
    <span class="md-ellipsis">
      Resettable/enabled flip-flops
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register" class="md-nav__link">
    <span class="md-ellipsis">
      Register
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Register">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#registerfil" class="md-nav__link">
    <span class="md-ellipsis">
      Registerfil
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synkrona-sekventiella-kretsar" class="md-nav__link">
    <span class="md-ellipsis">
      Synkrona sekventiella kretsar
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Synkrona sekventiella kretsar">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hur-snabbt-kan-vi-kora-en-krets" class="md-nav__link">
    <span class="md-ellipsis">
      Hur snabbt kan vi köra en krets?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forelasning-9-alu-och-encykelprocessor" class="md-nav__link">
    <span class="md-ellipsis">
      Föreläsning 9: ALU och encykelprocessor
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Föreläsning 9: ALU och encykelprocessor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#alu-aritmetisk-logisk-enhet" class="md-nav__link">
    <span class="md-ellipsis">
      ALU (aritmetisk logisk enhet)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-path-i-encykelprocessorer" class="md-nav__link">
    <span class="md-ellipsis">
      Data path (i encykelprocessorer)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kontrollenhet-i-encykelprocessor" class="md-nav__link">
    <span class="md-ellipsis">
      Kontrollenhet (i encykelprocessor)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prestanda" class="md-nav__link">
    <span class="md-ellipsis">
      Prestanda
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forelasning-10-pipeline-processorer" class="md-nav__link">
    <span class="md-ellipsis">
      Föreläsning 10: Pipeline-processorer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Föreläsning 10: Pipeline-processorer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#begrepp" class="md-nav__link">
    <span class="md-ellipsis">
      Begrepp
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parallellism-och-pipelining" class="md-nav__link">
    <span class="md-ellipsis">
      Parallellism och pipelining
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-och-kontrollfaror" class="md-nav__link">
    <span class="md-ellipsis">
      Data- och kontrollfaror
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#antalet-pipeline-steg" class="md-nav__link">
    <span class="md-ellipsis">
      Antalet pipeline-steg
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Antalet pipeline-steg">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hur-minimera-branch-mispredictions" class="md-nav__link">
    <span class="md-ellipsis">
      Hur minimera branch mispredictions?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forelasning-11-minneshierarki" class="md-nav__link">
    <span class="md-ellipsis">
      Föreläsning 11: Minneshierarki
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Föreläsning 11: Minneshierarki">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instruktions-och-dataminne" class="md-nav__link">
    <span class="md-ellipsis">
      Instruktions- och dataminne
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#temporalspatial-narhet" class="md-nav__link">
    <span class="md-ellipsis">
      Temporal/spatial närhet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#caching" class="md-nav__link">
    <span class="md-ellipsis">
      Caching
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Caching">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#direct-mapped-cache" class="md-nav__link">
    <span class="md-ellipsis">
      Direct-mapped cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#n-vags-set-associativ-cache" class="md-nav__link">
    <span class="md-ellipsis">
      N-vägs set-associativ cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ersattningspolicy" class="md-nav__link">
    <span class="md-ellipsis">
      Ersättningspolicy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flerniva-cache" class="md-nav__link">
    <span class="md-ellipsis">
      Flernivå-cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#skriv-policy" class="md-nav__link">
    <span class="md-ellipsis">
      Skriv-policy
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#virtuellt-minne" class="md-nav__link">
    <span class="md-ellipsis">
      Virtuellt minne
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forelasning-12-parallellism-samtidighet-uppsnabbning-och-ilp" class="md-nav__link">
    <span class="md-ellipsis">
      Föreläsning 12: Parallellism, samtidighet, uppsnabbning och ILP
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Föreläsning 12: Parallellism, samtidighet, uppsnabbning och ILP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parallellism-eller-samtidighet" class="md-nav__link">
    <span class="md-ellipsis">
      Parallellism eller samtidighet?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Parallellism eller samtidighet?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#speedup-vid-parallellisering" class="md-nav__link">
    <span class="md-ellipsis">
      Speedup vid parallellisering
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#amdahls-lag" class="md-nav__link">
    <span class="md-ellipsis">
      Amdahls lag
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parallellism" class="md-nav__link">
    <span class="md-ellipsis">
      Parallellism
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Parallellism">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sisd-simd-mimd" class="md-nav__link">
    <span class="md-ellipsis">
      SISD, SIMD, MIMD
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instruktionsniva-parallellism-ilp" class="md-nav__link">
    <span class="md-ellipsis">
      Instruktionsnivå-parallellism (ILP)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Instruktionsnivå-parallellism (ILP)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#multiple-issue" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple issue
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Multiple issue">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#out-of-order-exekvering" class="md-nav__link">
    <span class="md-ellipsis">
      Out-of-order-exekvering
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forelasning-13-simd-mimd-och-parallellprogrammering" class="md-nav__link">
    <span class="md-ellipsis">
      Föreläsning 13: SIMD, MIMD och parallellprogrammering
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Föreläsning 13: SIMD, MIMD och parallellprogrammering">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subword-parallellism-multimediatillagg" class="md-nav__link">
    <span class="md-ellipsis">
      Subword-parallellism &amp; multimediatillägg
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flertradning" class="md-nav__link">
    <span class="md-ellipsis">
      Flertrådning
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flertradade-processorer" class="md-nav__link">
    <span class="md-ellipsis">
      Flertrådade processorer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Flertrådade processorer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simultan-flertradning-smt" class="md-nav__link">
    <span class="md-ellipsis">
      Simultan flertrådning (SMT)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mimd-flerkarnighet-och-kluster" class="md-nav__link">
    <span class="md-ellipsis">
      MIMD, flerkärnighet och kluster
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MIMD, flerkärnighet och kluster">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cache-coherence" class="md-nav__link">
    <span class="md-ellipsis">
      Cache coherence
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cache coherence">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#false-sharing" class="md-nav__link">
    <span class="md-ellipsis">
      False sharing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#programmering-med-tradar-och-delade-variabler" class="md-nav__link">
    <span class="md-ellipsis">
      Programmering med trådar och delade variabler
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Programmering med trådar och delade variabler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#semafor" class="md-nav__link">
    <span class="md-ellipsis">
      Semafor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mutex" class="md-nav__link">
    <span class="md-ellipsis">
      Mutex
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ovrigt-fran-kursboken" class="md-nav__link">
    <span class="md-ellipsis">
      Övrigt (från kursboken)
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../sf1547/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SF1547 Numeriska metoder, grundkurs 6,0 hp
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../sf1625/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SF1625 Envariabelanalys 7,5 hp
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../sf1626/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SF1626 Flervariabelanalys 7,5 hp
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../sf1671/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SF1671 Matematik, baskurs, med diskret matematik 7,5 hp
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../sf1935/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SF1935 Sannolikhetsteori och statistik med tillämpning inom maskininlärning 7,5 hp
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Innehållsförteckning">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Innehållsförteckning
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#forelasning-1-inledning" class="md-nav__link">
    <span class="md-ellipsis">
      Föreläsning 1: Inledning
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Föreläsning 1: Inledning">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bakgrund" class="md-nav__link">
    <span class="md-ellipsis">
      Bakgrund
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spraket-c" class="md-nav__link">
    <span class="md-ellipsis">
      Språket C
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Språket C">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bestandsdelar" class="md-nav__link">
    <span class="md-ellipsis">
      Beståndsdelar
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forelasning-2-assembly" class="md-nav__link">
    <span class="md-ellipsis">
      Föreläsning 2: Assembly
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Föreläsning 2: Assembly">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instruktionsuppsattning-isa" class="md-nav__link">
    <span class="md-ellipsis">
      Instruktionsuppsättning (ISA)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Instruktionsuppsättning (ISA)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ciscrisc" class="md-nav__link">
    <span class="md-ellipsis">
      CISC/RISC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#risc-v-register" class="md-nav__link">
    <span class="md-ellipsis">
      RISC-V: Register
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#endianness" class="md-nav__link">
    <span class="md-ellipsis">
      Endianness
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#risc-v-assembly" class="md-nav__link">
    <span class="md-ellipsis">
      RISC-V: Assembly
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RISC-V: Assembly">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#logiska-instruktioner" class="md-nav__link">
    <span class="md-ellipsis">
      Logiska instruktioner
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tilldela-32-bitarstal" class="md-nav__link">
    <span class="md-ellipsis">
      Tilldela 32-bitarstal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rars" class="md-nav__link">
    <span class="md-ellipsis">
      RARS
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forelasning-3-maskinkod" class="md-nav__link">
    <span class="md-ellipsis">
      Föreläsning 3: Maskinkod
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Föreläsning 3: Maskinkod">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bytes-nibbles-och-ord" class="md-nav__link">
    <span class="md-ellipsis">
      Bytes, nibbles och ord
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#twos-complement" class="md-nav__link">
    <span class="md-ellipsis">
      Two's complement
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#risc-v-typer-av-instruktioner" class="md-nav__link">
    <span class="md-ellipsis">
      RISC-V: Typer av instruktioner
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RISC-V: Typer av instruktioner">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#register-instruktioner-r" class="md-nav__link">
    <span class="md-ellipsis">
      Register-instruktioner (R)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#immediate-instruktioner-i" class="md-nav__link">
    <span class="md-ellipsis">
      Immediate-instruktioner (I)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Immediate-instruktioner (I)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#shift-immediate-instruktioner" class="md-nav__link">
    <span class="md-ellipsis">
      Shift immediate-instruktioner
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#store-instruktioner-s" class="md-nav__link">
    <span class="md-ellipsis">
      Store-instruktioner (S)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#branch-instruktioner-b" class="md-nav__link">
    <span class="md-ellipsis">
      Branch-instruktioner (B)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upper-immediate-instruktioner-u" class="md-nav__link">
    <span class="md-ellipsis">
      Upper immediate-instruktioner (U)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jump-instruktioner-j" class="md-nav__link">
    <span class="md-ellipsis">
      Jump-instruktioner (J)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stack-minne" class="md-nav__link">
    <span class="md-ellipsis">
      Stack-minne
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forelasning-4-c" class="md-nav__link">
    <span class="md-ellipsis">
      Föreläsning 4: C
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Föreläsning 4: C">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pointer-aritmetik" class="md-nav__link">
    <span class="md-ellipsis">
      Pointer-aritmetik
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forelasning-5-io-system-12" class="md-nav__link">
    <span class="md-ellipsis">
      Föreläsning 5: I/O-system (1/2)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Föreläsning 5: I/O-system (1/2)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bussar" class="md-nav__link">
    <span class="md-ellipsis">
      Bussar
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bussar">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#synkron-buss" class="md-nav__link">
    <span class="md-ellipsis">
      Synkron buss
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asynkron-buss" class="md-nav__link">
    <span class="md-ellipsis">
      Asynkron buss
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#direkt-minnesatkomst-dma" class="md-nav__link">
    <span class="md-ellipsis">
      Direkt minnesåtkomst (DMA)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forelasning-6-io-system-22" class="md-nav__link">
    <span class="md-ellipsis">
      Föreläsning 6: I/O-system (2/2)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Föreläsning 6: I/O-system (2/2)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parallellseriell-kommunikation" class="md-nav__link">
    <span class="md-ellipsis">
      Parallell/seriell kommunikation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#undantag-och-avbrott" class="md-nav__link">
    <span class="md-ellipsis">
      Undantag och avbrott
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Undantag och avbrott">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aktivera-avbrott" class="md-nav__link">
    <span class="md-ellipsis">
      Aktivera avbrott
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forelasning-7-kombinationslogik" class="md-nav__link">
    <span class="md-ellipsis">
      Föreläsning 7: Kombinationslogik
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Föreläsning 7: Kombinationslogik">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#logiska-grindar" class="md-nav__link">
    <span class="md-ellipsis">
      Logiska grindar
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#boolesk-algebra" class="md-nav__link">
    <span class="md-ellipsis">
      Boolesk algebra
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kombinationskretsar" class="md-nav__link">
    <span class="md-ellipsis">
      Kombinationskretsar
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Kombinationskretsar">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#multiplexrar-och-avkodare" class="md-nav__link">
    <span class="md-ellipsis">
      Multiplexrar och avkodare
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aritmetik" class="md-nav__link">
    <span class="md-ellipsis">
      Aritmetik
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Aritmetik">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adderare" class="md-nav__link">
    <span class="md-ellipsis">
      Adderare
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#carry-propagate-adder-cpa" class="md-nav__link">
    <span class="md-ellipsis">
      Carry propagate adder (CPA)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timing" class="md-nav__link">
    <span class="md-ellipsis">
      Timing
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Timing">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#glitchar" class="md-nav__link">
    <span class="md-ellipsis">
      Glitchar
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forelasning-8-sekventiell-logik" class="md-nav__link">
    <span class="md-ellipsis">
      Föreläsning 8: Sekventiell logik
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Föreläsning 8: Sekventiell logik">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sr-vippa-sr-latch" class="md-nav__link">
    <span class="md-ellipsis">
      SR-vippa (SR latch)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#d-latch" class="md-nav__link">
    <span class="md-ellipsis">
      D latch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flip-flops" class="md-nav__link">
    <span class="md-ellipsis">
      Flip-flops
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Flip-flops">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#d-vippa-d-flip-flop" class="md-nav__link">
    <span class="md-ellipsis">
      D-vippa (D flip-flop)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resettableenabled-flip-flops" class="md-nav__link">
    <span class="md-ellipsis">
      Resettable/enabled flip-flops
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register" class="md-nav__link">
    <span class="md-ellipsis">
      Register
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Register">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#registerfil" class="md-nav__link">
    <span class="md-ellipsis">
      Registerfil
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synkrona-sekventiella-kretsar" class="md-nav__link">
    <span class="md-ellipsis">
      Synkrona sekventiella kretsar
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Synkrona sekventiella kretsar">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hur-snabbt-kan-vi-kora-en-krets" class="md-nav__link">
    <span class="md-ellipsis">
      Hur snabbt kan vi köra en krets?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forelasning-9-alu-och-encykelprocessor" class="md-nav__link">
    <span class="md-ellipsis">
      Föreläsning 9: ALU och encykelprocessor
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Föreläsning 9: ALU och encykelprocessor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#alu-aritmetisk-logisk-enhet" class="md-nav__link">
    <span class="md-ellipsis">
      ALU (aritmetisk logisk enhet)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-path-i-encykelprocessorer" class="md-nav__link">
    <span class="md-ellipsis">
      Data path (i encykelprocessorer)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kontrollenhet-i-encykelprocessor" class="md-nav__link">
    <span class="md-ellipsis">
      Kontrollenhet (i encykelprocessor)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prestanda" class="md-nav__link">
    <span class="md-ellipsis">
      Prestanda
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forelasning-10-pipeline-processorer" class="md-nav__link">
    <span class="md-ellipsis">
      Föreläsning 10: Pipeline-processorer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Föreläsning 10: Pipeline-processorer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#begrepp" class="md-nav__link">
    <span class="md-ellipsis">
      Begrepp
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parallellism-och-pipelining" class="md-nav__link">
    <span class="md-ellipsis">
      Parallellism och pipelining
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-och-kontrollfaror" class="md-nav__link">
    <span class="md-ellipsis">
      Data- och kontrollfaror
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#antalet-pipeline-steg" class="md-nav__link">
    <span class="md-ellipsis">
      Antalet pipeline-steg
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Antalet pipeline-steg">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hur-minimera-branch-mispredictions" class="md-nav__link">
    <span class="md-ellipsis">
      Hur minimera branch mispredictions?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forelasning-11-minneshierarki" class="md-nav__link">
    <span class="md-ellipsis">
      Föreläsning 11: Minneshierarki
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Föreläsning 11: Minneshierarki">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#instruktions-och-dataminne" class="md-nav__link">
    <span class="md-ellipsis">
      Instruktions- och dataminne
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#temporalspatial-narhet" class="md-nav__link">
    <span class="md-ellipsis">
      Temporal/spatial närhet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#caching" class="md-nav__link">
    <span class="md-ellipsis">
      Caching
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Caching">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#direct-mapped-cache" class="md-nav__link">
    <span class="md-ellipsis">
      Direct-mapped cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#n-vags-set-associativ-cache" class="md-nav__link">
    <span class="md-ellipsis">
      N-vägs set-associativ cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ersattningspolicy" class="md-nav__link">
    <span class="md-ellipsis">
      Ersättningspolicy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flerniva-cache" class="md-nav__link">
    <span class="md-ellipsis">
      Flernivå-cache
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#skriv-policy" class="md-nav__link">
    <span class="md-ellipsis">
      Skriv-policy
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#virtuellt-minne" class="md-nav__link">
    <span class="md-ellipsis">
      Virtuellt minne
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forelasning-12-parallellism-samtidighet-uppsnabbning-och-ilp" class="md-nav__link">
    <span class="md-ellipsis">
      Föreläsning 12: Parallellism, samtidighet, uppsnabbning och ILP
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Föreläsning 12: Parallellism, samtidighet, uppsnabbning och ILP">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parallellism-eller-samtidighet" class="md-nav__link">
    <span class="md-ellipsis">
      Parallellism eller samtidighet?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Parallellism eller samtidighet?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#speedup-vid-parallellisering" class="md-nav__link">
    <span class="md-ellipsis">
      Speedup vid parallellisering
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#amdahls-lag" class="md-nav__link">
    <span class="md-ellipsis">
      Amdahls lag
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parallellism" class="md-nav__link">
    <span class="md-ellipsis">
      Parallellism
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Parallellism">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sisd-simd-mimd" class="md-nav__link">
    <span class="md-ellipsis">
      SISD, SIMD, MIMD
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instruktionsniva-parallellism-ilp" class="md-nav__link">
    <span class="md-ellipsis">
      Instruktionsnivå-parallellism (ILP)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Instruktionsnivå-parallellism (ILP)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#multiple-issue" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple issue
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Multiple issue">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#out-of-order-exekvering" class="md-nav__link">
    <span class="md-ellipsis">
      Out-of-order-exekvering
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#forelasning-13-simd-mimd-och-parallellprogrammering" class="md-nav__link">
    <span class="md-ellipsis">
      Föreläsning 13: SIMD, MIMD och parallellprogrammering
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Föreläsning 13: SIMD, MIMD och parallellprogrammering">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subword-parallellism-multimediatillagg" class="md-nav__link">
    <span class="md-ellipsis">
      Subword-parallellism &amp; multimediatillägg
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flertradning" class="md-nav__link">
    <span class="md-ellipsis">
      Flertrådning
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flertradade-processorer" class="md-nav__link">
    <span class="md-ellipsis">
      Flertrådade processorer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Flertrådade processorer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simultan-flertradning-smt" class="md-nav__link">
    <span class="md-ellipsis">
      Simultan flertrådning (SMT)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mimd-flerkarnighet-och-kluster" class="md-nav__link">
    <span class="md-ellipsis">
      MIMD, flerkärnighet och kluster
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MIMD, flerkärnighet och kluster">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cache-coherence" class="md-nav__link">
    <span class="md-ellipsis">
      Cache coherence
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cache coherence">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#false-sharing" class="md-nav__link">
    <span class="md-ellipsis">
      False sharing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#programmering-med-tradar-och-delade-variabler" class="md-nav__link">
    <span class="md-ellipsis">
      Programmering med trådar och delade variabler
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Programmering med trådar och delade variabler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#semafor" class="md-nav__link">
    <span class="md-ellipsis">
      Semafor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mutex" class="md-nav__link">
    <span class="md-ellipsis">
      Mutex
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ovrigt-fran-kursboken" class="md-nav__link">
    <span class="md-ellipsis">
      Övrigt (från kursboken)
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="is1500-datorteknik-och-komponenter-90-hp">IS1500 Datorteknik och komponenter 9,0 hp</h1>
<table>
<thead>
<tr>
<th>Tillfälleskod</th>
<th>Termin(er)</th>
<th>Period(er)</th>
<th>Föreläsare</th>
</tr>
</thead>
<tbody>
<tr>
<td>51197</td>
<td>HT2024</td>
<td>3</td>
<td>Artur Podobas</td>
</tr>
</tbody>
</table>
<p>Sammanfattning av kursens material inför tentamen.</p>
<h2 id="forelasning-1-inledning">Föreläsning 1: Inledning</h2>
<h3 id="bakgrund">Bakgrund</h3>
<blockquote>
<p><strong>Moores lag:</strong> 2x transistorer varje 18-24 månader.<br>
<strong>The power wall:</strong> Högre klockfrekvens leder till mer ström &amp; värmeutveckling (Pentium 4).</p>
<p>Idag mer fokus på flerkärniga processorer och specialiserade kretsar - nya utmaningar: parallellprogrammering och hårdvaruspecialisering.</p>
</blockquote>
<p>Abstraktionsnivåer i datorsystem:</p>
<ul>
<li>Ett datorsystem</li>
<li>Mjukvara: Program/operativsystem</li>
<li>Gränssnitt mellan hård- och mjukvara: ISA (instruktionsuppsättning)</li>
<li>Digital hårdvarudesign: Mikroarkitektur, logik och digitala kretsar</li>
<li>Analog hårdvarudesign: Analoga kretsar, komponenter och fysik</li>
</ul>
<h3 id="spraket-c">Språket C</h3>
<p>C är ett imperativt (tillstånd förändras av tilldelningar) lågnivåspråk.</p>
<p>T.ex.
<div class="language-c highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="cm">/* Main function. */</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(){</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Hello world!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="p">}</span>
</span></code></pre></div></p>
<h4 id="bestandsdelar">Beståndsdelar</h4>
<ul>
<li><strong>Literals:</strong> T.ex. <code>0x01</code>, <code>3.1415</code>.</li>
<li><strong>Identifiers:</strong> Variabel- och funktionsnamn. T.ex. <code>my_variable</code>, <code>min</code>.</li>
<li><strong>Keywords:</strong> Inbyggda, reserverade ord. T.ex. <code>if</code>, <code>else</code>, <code>int</code>.</li>
<li><strong>Statements:</strong> Avslutas med semikolon. T.ex. <code>int a = 1;</code>.</li>
<li><strong>Expressions:</strong> T.ex. <code>a * 2</code>.</li>
<li><strong>Operators:</strong> T.ex. <code>+</code>, <code>-</code>, <code>&amp;</code>, <code>&lt;&lt;</code>, <code>==</code>.</li>
</ul>
<h2 id="forelasning-2-assembly">Föreläsning 2: Assembly</h2>
<h3 id="instruktionsuppsattning-isa">Instruktionsuppsättning (ISA)</h3>
<p>En ISA (t.ex. x86) fungerar som ett gränssnitt mellan hårdvara och mjukvara, och implementeras av mikroarkitekturen (t.ex. Intel/AMD-processorer).</p>
<h4 id="ciscrisc">CISC/RISC</h4>
<ul>
<li><strong>Complex Instruction Set Computers (CISC):</strong> Många <em>specialiserade</em> instruktioner av <em>variarande storlek</em> och tidsåtgång (cykler).</li>
<li><strong>Reduced Instruction Set Computers (RISC):</strong> Möjliggör enklare hårdvara. Normalt fix storlek och en cykel/instruktion (exkl. minnesåtkomst och cachemissar).</li>
</ul>
<h4 id="risc-v-register">RISC-V: Register</h4>
<table>
<thead>
<tr>
<th>#</th>
<th>Namn</th>
<th>Beskrivning</th>
<th>Sparas av</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td><code>zero</code></td>
<td>Konstant 0.</td>
<td>-</td>
</tr>
<tr>
<td>1</td>
<td><code>ra</code></td>
<td>Returadress.</td>
<td>Caller</td>
</tr>
<tr>
<td>2</td>
<td><code>sp</code></td>
<td>Stackpekare.</td>
<td>Callee</td>
</tr>
<tr>
<td>3</td>
<td><code>gp</code></td>
<td>Global pekare.</td>
<td>-</td>
</tr>
<tr>
<td>4</td>
<td><code>tp</code></td>
<td>Trådpekare.</td>
<td>-</td>
</tr>
<tr>
<td>5-7</td>
<td><code>t0</code>-<code>t2</code></td>
<td>Temporär.</td>
<td>Caller</td>
</tr>
<tr>
<td>8-9</td>
<td><code>s0</code>,<code>s1</code></td>
<td>Sparade.</td>
<td>Callee</td>
</tr>
<tr>
<td>10-17</td>
<td><code>a0</code>-<code>a7</code></td>
<td>Argument/returvärden (<code>a0</code>-<code>a1</code>).</td>
<td>-</td>
</tr>
<tr>
<td>18-27</td>
<td><code>s2</code>-<code>s11</code></td>
<td>Sparade.</td>
<td>Callee</td>
</tr>
<tr>
<td>28-31</td>
<td><code>t3</code>-<code>t6</code></td>
<td>Temporära.</td>
<td>Caller</td>
</tr>
</tbody>
</table>
<h4 id="endianness">Endianness</h4>
<ul>
<li><strong>Big-endian:</strong> Ordets MSB sparas på lägsta adress. T.ex. 1 = <code>00 00 00 01</code>.</li>
<li><strong>Little-endian:</strong> Ordets LSB sparas på lägsta adress. T.ex. 1 = <code>01 00 00 00</code>.</li>
</ul>
<p><strong>OBS!</strong> RISC-V är litte-endian!</p>
<h4 id="risc-v-assembly">RISC-V: Assembly</h4>
<h5 id="logiska-instruktioner">Logiska instruktioner</h5>
<p><code>and</code>, <code>or</code>, <code>xor</code>, <code>andi</code>, <code>ori</code>, <code>xori</code>, <code>slli</code> ("&lt;&lt;"), <code>srli</code> (logisk, JS: "&gt;&gt;&gt;"), <code>srai</code> (aritmetisk, JS: "&gt;&gt;")</p>
<p>"NOT" kan utföras med hjälp av <code>xori</code>:</p>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nf">xori</span><span class="w"> </span><span class="no">t0</span><span class="p">,</span><span class="w"> </span><span class="no">t1</span><span class="p">,</span><span class="w"> </span><span class="mi">0xffffffff</span><span class="w"> </span><span class="c1"># -1 fungerar ockå</span>
</span></code></pre></div>
<p><strong>OBS!</strong> Immediates i RISC-V teckenförlängs till 12 bitar. Immediatevärdet i den läsbara instruktionen tolkas dock som ett signerat 32-bitarstal, vilket medför att <code>0xffffffff</code> tolkas som -1, som kan representeras i 12 bitar som <code>0xFFF</code>, och alltså ryms i instruktionen. Att skriva <code>0xFFF</code> direkt fungerar dock <em>inte</em>, eftersom detta tolkas som 4095, och därmed inte kan representeras av ett signerat 12-bitarstal.</p>
<h5 id="tilldela-32-bitarstal">Tilldela 32-bitarstal</h5>
<p>För att tilldela ett 32-bitarsvärde till ett register använder vi två instruktioner:</p>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nf">lui</span><span class="w"> </span><span class="no">s0</span><span class="p">,</span><span class="w"> </span><span class="mi">0x6af02</span><span class="w">     </span><span class="c1"># De 20 mest signifikanta bitarna (övriga := 0): s0 := 0x6af02000</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="nf">ori</span><span class="w"> </span><span class="no">s0</span><span class="p">,</span><span class="w"> </span><span class="no">s0</span><span class="p">,</span><span class="w"> </span><span class="mi">0x2e7</span><span class="w">   </span><span class="c1"># De 12 resterande (minst signifikanta) bitarna: s0 := 0x6af022e7</span>
</span></code></pre></div>
<h5 id="rars">RARS</h5>
<p>Exempel:
<div class="language-asm highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="na">.data</span><span class="w">               </span><span class="c1"># Spara i data-delen av minnet</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="na">.align</span><span class="w"> </span><span class="mi">2</span><span class="w">            </span><span class="c1"># Assemblatorn kommer att se till att följande data är ord-justerad</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">                    </span><span class="c1"># OBS! 2 = log2(&lt;antal bytes&gt;)</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="nl">msg:</span><span class="w">    </span><span class="na">.space</span><span class="w">  </span><span class="mi">8</span><span class="w">   </span><span class="c1"># Reservera 8 bytes och ge denna etiketten &quot;msg&quot;</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="na">.text</span><span class="w">                           </span><span class="c1"># Spara i text-delen av minnet (dvs. maskinkod följer)</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="nl">main:</span><span class="w">   </span><span class="nf">la</span><span class="w">      </span><span class="no">t1</span><span class="p">,</span><span class="w"> </span><span class="no">msg</span><span class="w">         </span><span class="c1"># Hämta adress för en etikett (&quot;msg&quot;)</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">        </span><span class="nf">addi</span><span class="w">    </span><span class="no">t2</span><span class="p">,</span><span class="w"> </span><span class="no">zero</span><span class="p">,</span><span class="w"> </span><span class="mi">0x27</span><span class="w">  </span><span class="c1"># t2 := 0x27</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">        </span><span class="nf">sb</span><span class="w">      </span><span class="no">t2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">(</span><span class="no">t1</span><span class="p">)</span><span class="w">       </span><span class="c1"># Spara en byte (t2) på minnesadress t1 + 0</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">        </span><span class="nf">addi</span><span class="w">    </span><span class="no">t2</span><span class="p">,</span><span class="w"> </span><span class="no">zero</span><span class="p">,</span><span class="w"> </span><span class="mi">0x18</span><span class="w">  </span><span class="c1"># t2 := 0x18</span>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">        </span><span class="nf">sb</span><span class="w">      </span><span class="no">t2</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">(</span><span class="no">t1</span><span class="p">)</span><span class="w">       </span><span class="c1"># Spara en byte (t2) på minnesadress t1 + 1</span>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">        </span><span class="nf">li</span><span class="w">      </span><span class="no">t2</span><span class="p">,</span><span class="w"> </span><span class="mi">0x4b544800</span><span class="w">  </span><span class="c1"># Load immediate (pseudoinstruktion)</span>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="w">        </span><span class="nf">sw</span><span class="w">      </span><span class="no">t2</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">(</span><span class="no">t1</span><span class="p">)</span><span class="w">       </span><span class="c1"># Spara ett ord (i detta fall: 32 bitar) (t2) på minnesadress t1 + 4</span>
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="w">        </span><span class="c1"># Resultat (i minnet): | 27 18 00 00 | 00 48 54 4b |</span>
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="nl">stop:</span><span class="w">   </span><span class="nf">j</span><span class="w">       </span><span class="no">stop</span><span class="w">            </span><span class="c1"># Evig loop i slutet</span>
</span></code></pre></div></p>
<h2 id="forelasning-3-maskinkod">Föreläsning 3: Maskinkod</h2>
<h3 id="bytes-nibbles-och-ord">Bytes, nibbles och ord</h3>
<ul>
<li>En <em>byte</em> = 8 bitar</li>
<li>En <em>nibble</em> = 1/2 ord</li>
<li>Ett <em>ord</em> = beror på processor (normalt 32/64 bitar)</li>
</ul>
<h3 id="twos-complement">Two's complement</h3>
<ul>
<li>Första biten anger tecken (+/-).</li>
<li>-1 representeras som <code>0b111...1</code> (beroende på storlek).</li>
<li>Binär addition och subtraktion fungerar som vanligt.</li>
<li>För ett positivt tal <code>X</code>: <code>negativt(X) = ~X + 1</code></li>
</ul>
<blockquote>
<p><strong>Teckenförlängning:</strong></p>
<p>För att teckenförlänga ett binärt tal, kopiera teckenbiten (msb) åt vänster tills talet är av önskat antal bitar.</p>
<p>Exempel: 6 = <code>1010</code> (4 bitar) = <code>1111 1010</code> (8 bitar)</p>
</blockquote>
<h3 id="risc-v-typer-av-instruktioner">RISC-V: Typer av instruktioner</h3>
<h4 id="register-instruktioner-r">Register-instruktioner (R)</h4>
<p>Har tre registeroperander: två källor och ett mål.</p>
<table>
<thead>
<tr>
<th>31...25</th>
<th>24...20</th>
<th>19...15</th>
<th>14...12</th>
<th>11...7</th>
<th>6...0</th>
</tr>
</thead>
<tbody>
<tr>
<td>funct7</td>
<td>rs2</td>
<td>rs1</td>
<td>funct3</td>
<td>rd</td>
<td>opcode</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>funct3/7</strong> avgör vilket specifik operation som utförs.</li>
<li><strong>rs2/rs1</strong> är källregistren.</li>
<li><strong>rd</strong> är målregistret.</li>
<li><strong>opcode</strong> anger vilket format instruktionen är i.</li>
</ul>
<h4 id="immediate-instruktioner-i">Immediate-instruktioner (I)</h4>
<p>Har två registeroperatander och en immediate.</p>
<table>
<thead>
<tr>
<th>31...20</th>
<th>19...15</th>
<th>14...12</th>
<th>11...7</th>
<th>6...0</th>
</tr>
</thead>
<tbody>
<tr>
<td>imm</td>
<td>rs1</td>
<td>funct3</td>
<td>rd</td>
<td>opcode</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>imm</strong> är ett 12-bitars immediatevärde.</li>
</ul>
<p>T.ex. <code>lw t0, 8(s1)</code> kodas som <code>000000001000 01001 010 00101 0000011</code></p>
<h5 id="shift-immediate-instruktioner">Shift immediate-instruktioner</h5>
<p>Shift immediate-instruktionerna (<code>srli</code>, <code>slli</code> &amp; <code>srai</code>) ser lite annorlunda ut:</p>
<table>
<thead>
<tr>
<th>31...25</th>
<th>24...20</th>
<th>19...15</th>
<th>14...12</th>
<th>11...7</th>
<th>6...0</th>
</tr>
</thead>
<tbody>
<tr>
<td>imm<sub>11:5</sub></td>
<td>shamt</td>
<td>rs1</td>
<td>funct3</td>
<td>rd</td>
<td>opcode</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>imm<sub>11:5</sub></strong> avgör shift-beteende (aritmetiskt eller logiskt) - funct3 är identiskt för båda typerna av right-shift.</li>
<li><strong>shamt</strong> anger antalet shift-steg.</li>
</ul>
<h4 id="store-instruktioner-s">Store-instruktioner (S)</h4>
<p>Instruktioner som arbetar med två register och en immediateoperand, t.ex. <code>sw</code> (<em>store word</em>).</p>
<table>
<thead>
<tr>
<th>31...25</th>
<th>24...20</th>
<th>19...15</th>
<th>14...12</th>
<th>11...7</th>
<th>6...0</th>
</tr>
</thead>
<tbody>
<tr>
<td>imm<sub>11:5</sub></td>
<td>rs2</td>
<td>rs1</td>
<td>funct3</td>
<td>imm<sub>4:0</sub></td>
<td>opcode</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>imm</strong> är ett immediatevärde (för <code>sw</code>: förskjutning, i bytes).</li>
</ul>
<h4 id="branch-instruktioner-b">Branch-instruktioner (B)</h4>
<p>Instruktioner med två register och en immediateoperand.</p>
<table>
<thead>
<tr>
<th>31</th>
<th>30...25</th>
<th>24...20</th>
<th>19...15</th>
<th>14...12</th>
<th>11...8</th>
<th>7</th>
<th>6...0</th>
</tr>
</thead>
<tbody>
<tr>
<td>imm<sub>12</sub></td>
<td>imm<sub>10:5</sub></td>
<td>rs2</td>
<td>rs1</td>
<td>funct3</td>
<td>imm<sub>4:1</sub></td>
<td>imm<sub>11</sub></td>
<td>opcode</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>imm</strong> anger målets position <em>relativt</em> <code>pc</code> (notera att imm<sub>0</sub> saknas - denna antas =0).</li>
<li><strong>funct3</strong> avgör typ av branch (t.ex. <code>beq</code>, <code>bne</code>).</li>
</ul>
<h4 id="upper-immediate-instruktioner-u">Upper immediate-instruktioner (U)</h4>
<p>Instruktioner med ett register och ett stort (20-bitars) immediatevärde. I vårt fall: <code>lui</code>.</p>
<table>
<thead>
<tr>
<th>31...12</th>
<th>11...7</th>
<th>6...0</th>
</tr>
</thead>
<tbody>
<tr>
<td>imm</td>
<td>rd</td>
<td>opcode</td>
</tr>
</tbody>
</table>
<h4 id="jump-instruktioner-j">Jump-instruktioner (J)</h4>
<p>Instruktioner med ett register och ett stort (20-bitars) immediatevärde.</p>
<table>
<thead>
<tr>
<th>31</th>
<th>30...21</th>
<th>20</th>
<th>19...12</th>
<th>11...7</th>
<th>6...0</th>
</tr>
</thead>
<tbody>
<tr>
<td>imm<sub>20</sub></td>
<td>imm<sub>10:1</sub></td>
<td>imm<sub>11</sub></td>
<td>imm<sub>19:12</sub></td>
<td>rd</td>
<td>opcode</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>imm</strong> anger målets position <em>relativt</em> programräknaren (notera att imm<sub>0</sub> saknas - denna antas =0).</li>
<li><strong>rd</strong> anger vart returadressen (<code>pc</code> före hoppet + 4) skall sparas.</li>
</ul>
<blockquote>
<p>Obs! <code>jalr</code> (jump and link-register) är en I-instruktion, och använder <em>inte</em> <code>pc</code>-relativ adressering.
Istället hoppar vi till <code>imm</code> (12 bitar, teckenförlängt till 32 bitar) + <code>rs1</code>.</p>
</blockquote>
<h3 id="stack-minne">Stack-minne</h3>
<p>En stack (hög) är en minnespartition som används för att spara variabler och fler argument.
Läsning/skrivning sker på adressen i <code>sp</code> enligt principen LIFO (<em>last in, first out</em>).</p>
<p>Läs/skriv-makron kan definieras som följer (i RARS):</p>
<div class="language-asm highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="na">.macro</span><span class="w"> </span><span class="no">PUSH</span><span class="p">(</span><span class="nv">%reg</span><span class="p">)</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">    </span><span class="nf">addi</span><span class="w">    </span><span class="no">sp</span><span class="p">,</span><span class="w"> </span><span class="no">sp</span><span class="p">,</span><span class="w"> </span><span class="mi">-4</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">    </span><span class="nf">sw</span><span class="w">      </span><span class="nv">%reg</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">(</span><span class="no">sp</span><span class="p">)</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="na">.end_macro</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="na">.macro</span><span class="w"> </span><span class="no">POP</span><span class="p">(</span><span class="nv">%reg</span><span class="p">)</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">    </span><span class="nf">lw</span><span class="w">      </span><span class="nv">%reg</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">(</span><span class="no">sp</span><span class="p">)</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">    </span><span class="nf">addi</span><span class="w">    </span><span class="no">sp</span><span class="p">,</span><span class="w"> </span><span class="no">sp</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="na">.end_macro</span>
</span></code></pre></div>
<h2 id="forelasning-4-c">Föreläsning 4: C</h2>
<h3 id="pointer-aritmetik">Pointer-aritmetik</h3>
<div class="language-c highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kt">int</span><span class="w"> </span><span class="n">arr</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">};</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="n">printf</span><span class="p">(</span><span class="s">&quot;arr[1] : %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">arr</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="n">printf</span><span class="p">(</span><span class="s">&quot;arr[1] : %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="p">(</span><span class="n">arr</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">));</span>
</span></code></pre></div>
<h2 id="forelasning-5-io-system-12">Föreläsning 5: I/O-system (1/2)</h2>
<ul>
<li>Memory mapped I/O - särskilda bitar av minnet används för I/O-enheter.</li>
</ul>
<h3 id="bussar">Bussar</h3>
<p>En <em>buss</em> (flera parallella ledningar) är ett delat nätverk varigenom processorn kan kommunicera med minne och I/O-enheter.</p>
<p>Tre linjer:</p>
<ul>
<li>Adress: Adressen där data läses/skrivs.</li>
<li>Data: Data som lästs, eller som ska skrivas.</li>
<li>Kontroll: T.ex. handskakningssignaler.</li>
</ul>
<p>Varje I/O-enhet har ett eget adressomfång. <em>Dessa är alltid unika och överlappar ej.</em>
När en enhet inte kommunicerar är dess buss-utgångar avstängda med hög impedans (uppnås med en tri-state gate).</p>
<h4 id="synkron-buss">Synkron buss</h4>
<p>Dataöverföring på en synkron buss synkroniseras med en bussklocka. En läsoperation kan ske på följande vis:</p>
<ol>
<li>En kontrollsignal indikerar att vi vill läsa. Processorn lägger adressen på bussen.</li>
<li>Alla enheter läser adressen; endast en enhet svarar genom att lägga fram data.</li>
</ol>
<h4 id="asynkron-buss">Asynkron buss</h4>
<p>Asynkrona bussar saknar klocka. Istället används ett handskakningsprotokoll mellan deltagande parter. En läsoperation kan ske på följande vis:</p>
<ol>
<li>Ledaren lägger adressen på bussen. Andra enheter avkodar informationen.</li>
<li>Ledaren sätter "ledare redo".</li>
<li>Följaren lägger data på bussen och signalerar "följare redo" (dvs. data redo).</li>
<li>Ledaren läser data och sätter "ledare redo" till <em>LOW</em>.</li>
<li>När följaren ser att "ledare redo" sjunker kan den sluta skicka data. "Följare redo" sätts till <em>LOW</em>.</li>
</ol>
<h4 id="direkt-minnesatkomst-dma">Direkt minnesåtkomst (DMA)</h4>
<p>För att undvika att processorn hålls upptagen av dataöverföring mellan I/O-enheter, särskilt då ordvis
överföring av stora mängder data är ineffektivt, används DMA.</p>
<ul>
<li>DMA tillåter överföringar av data mellan olika delar av minnet, utan att ständigt inblanda processorn.</li>
<li>Processorn skickar en DMA-förfrågan (vilken adress och mängd data som skall överföras).</li>
<li>En DMA-kontroller genomför överföringen - processorn kan göra annat under tiden.</li>
<li>DMA-kontrollern kan utfärda en interrupt-förfrågan (IRQ) när överföringen är färdig.</li>
</ul>
<h2 id="forelasning-6-io-system-22">Föreläsning 6: I/O-system (2/2)</h2>
<h3 id="parallellseriell-kommunikation">Parallell/seriell kommunikation</h3>
<ul>
<li><strong>Parallell:</strong> Flera linor.</li>
<li><strong>Seriell:</strong> Synkront (t.ex. SPI, I2C) eller asynkront (t.ex. UART).</li>
</ul>
<h3 id="undantag-och-avbrott">Undantag och avbrott</h3>
<p>Ett undantag (<em>exception</em>) kan orsakas av ett fel (t.ex. ogiltig instruktion), avbrott (<em>interrupt</em> - en speciell sorts
undantag - t.ex. ett knapptryck) eller mjukvaruavbrott (t.ex. systemanrop).</p>
<p>Undantag hanteras av <em>undantagshanteraren</em> (på adress 0x00000000):</p>
<ol>
<li>Processorn sparar nuvarande <code>pc</code> i <code>mepc</code> och undantagsorsaken i <code>mcause</code>.</li>
<li>Processorn inaktiverar avbrott i <code>mstatus</code>.</li>
<li>Processorn hoppar till adressen <code>mtvec</code> (undantagshanteraren, = 0x00000000).</li>
<li>Undantagshanteraren sparar register på stacken, undersöker orsaken och anropar avbrottshanteraren, och återställer sparade register.</li>
<li>Undantagshanteraren hoppar till <code>mepc</code> (eller <code>mepc</code> + 4 vid mjukvaruavbrott).</li>
</ol>
<p>Externa avbrott hanteras normalt av en PLIC. I denna kurs behandlas dock alla avbrott som lokala, och hanteras därför av CLINT.</p>
<p>I ARM används olika undantagshanterare beroende på orsak - detta kallas för en <em>undantagsvektor</em>.</p>
<h4 id="aktivera-avbrott">Aktivera avbrott</h4>
<p>Avbrott måste aktiveras både på I/O-enheten och globalt (bit #3 i <code>mstatus</code>). Varje avbrottstyp som skall hanteras måste också accepteras av processorn (bit #&lt;exception cause no.&gt; i <code>mie</code>).</p>
<h2 id="forelasning-7-kombinationslogik">Föreläsning 7: Kombinationslogik</h2>
<h3 id="logiska-grindar">Logiska grindar</h3>
<ul>
<li>Negation: <strong>NOT</strong></li>
<li>Konjunktion: <strong>AND</strong> ("alla") och <strong>NAND</strong> ("inte alla").</li>
<li>Disjunktion: <strong>OR</strong> ("minst en"), <strong>XOR</strong> ("udda antal") och <strong>NOR</strong> ("ingen").</li>
<li>Ekvivalens: <strong>XNOR</strong> ("lika")</li>
<li><strong>BUF</strong>: Logiskt ekvivalent med en ledning. Av betydelse endast ur ett analogiskt perspektiv.</li>
</ul>
<h3 id="boolesk-algebra">Boolesk algebra</h3>
<ul>
<li><strong>AND:</strong> <span class="arithmatex">\(AB\)</span> eller <span class="arithmatex">\(A\cdot B\)</span></li>
<li><strong>OR:</strong> <span class="arithmatex">\(A+B\)</span></li>
<li><strong>NOT:</strong> <span class="arithmatex">\(\overline A\)</span> eller <span class="arithmatex">\(A'\)</span></li>
</ul>
<blockquote>
<p><strong>De Morgans lagar:</strong></p>
<div class="arithmatex">\[\overline{AB}=\overline{A}+\overline{B}\quad\text{och}\quad\overline{A+B}=\overline{A}\cdot\overline{B}\]</div>
</blockquote>
<p><em>Sum-of-products-form:</em> t.ex. <span class="arithmatex">\(Y=\bar A\bar R\)</span></p>
<p><em>Product-of-sums-form:</em> t.ex. <span class="arithmatex">\(Y=(A+\bar R)(\bar A+R)(\bar A+\bar R)\)</span></p>
<h3 id="kombinationskretsar">Kombinationskretsar</h3>
<p>Kombinationskretsar <em>påverkas enbart av aktuell inmatning</em>.</p>
<blockquote>
<p><strong>Problem:</strong></p>
<ul>
<li>Instabila kretsar: T.ex. ringoscillatorer (Obs: sekventiella, inte kombinatoriska!).</li>
<li>Otillåtna värden ("X"): T.ex. en ledning mottar 0 och 1 samtidigt (contention).</li>
</ul>
</blockquote>
<p><strong>Tristate:</strong> Har hög impedans ("Z") om "utmatning aktiv"-signalen inte är aktiv. Används i bussar för att undvika contention.</p>
<h4 id="multiplexrar-och-avkodare">Multiplexrar och avkodare</h4>
<p>En <em>multiplexer</em> tar 2+ bitar som indata och ger 1 bit utdata. Kontrollsignalen S avgör vilken som släpps igenom.</p>
<p>En <em>avkodare</em> har N ingångar och 2<sup>N</sup> utgångar.
Varje möjlig kombination av indata motsvaras av en utgång.</p>
<h4 id="aritmetik">Aritmetik</h4>
<h5 id="adderare">Adderare</h5>
<p>En <em>halvadderare</em> har en <em>carry out</em>-signal.<br>
En <em>heladderare</em> tar dessutom in en <em>carry in</em>-signal.</p>
<h5 id="carry-propagate-adder-cpa">Carry propagate adder (CPA)</h5>
<p>En <em>carry propagate adder</em> beräknar summan av två N-bitarstal. Tre vanliga implementationer:</p>
<ol>
<li>Ripple-carry: Enkel men långsam. Består av flera seriekopplade heladderare.</li>
<li>Carry-lookahead: Snabbare (delar upp beräkningen i block).<ul>
<li>Använder generera (G) och fortplanta (P)-signaler för att beskriva hur <span class="arithmatex">\(C_\text{out}\)</span> bestäms för ett block.</li>
<li>Kolumn <span class="arithmatex">\(i\)</span> i adderaren genererar en carryout om <span class="arithmatex">\(C_i=A_iB_i+(A_i+B_i)C_{i-1}=G_i+P_iC_{i-1}\)</span></li>
<li>Varje enskilt block är en ripple-carry-adderare, men med extra logik för att snabbt avgöra carryout-biten. Denna logik kan utföras parallellt, och additionen kan därför utföras snabbare än i en ripple-carry.</li>
</ul>
</li>
<li>Prefix-adderare: Snabbast. Används i moderna datorer.</li>
</ol>
<blockquote>
<p><strong>Subtraktion:</strong><br>
Subtraktion utförs enkelt med en CPA genom att invertera signal B och låta C<sub>in</sub> = 1.</p>
</blockquote>
<h4 id="timing">Timing</h4>
<blockquote>
<p><em>Fördröjningar mäts alltid mellan in- och utdatasignalernas respektive 50%-punkter.</em></p>
</blockquote>
<p><em>Fortplantningstid (<span class="arithmatex">\(t_\text{pd}\)</span>):</em> Den maximala tiden från att <em>någon</em> input ändras, tills att ändringen nått <em>alla</em> outputs (oavsett om de behöver ändras eller ej).</p>
<p><em>Kontamineringstid (<span class="arithmatex">\(t_\text{cd}\)</span>):</em> Den <em>minsta</em> tiden från att <em>någon</em> input ändras, tills att någon output ändras.</p>
<h5 id="glitchar">Glitchar</h5>
<p>En <em>glitch</em> inträffar när en indataförändring orsakar flera förändringar i utdata, t.ex. att utdata förändras från <span class="arithmatex">\(1\rarr0\rarr1\)</span>.</p>
<h2 id="forelasning-8-sekventiell-logik">Föreläsning 8: Sekventiell logik</h2>
<p>Sekventiella kretsar påverkas av <em>både aktuella och tidigare indata</em>.</p>
<p><em>En mikroprocessor består av klockade state elements (uppdateras vid rising edge) och kombinatorisk logik, och är</em>
<em>därför i sig en synkron sekventiell krets.</em></p>
<blockquote>
<p><strong>Bistabilitet:</strong><br>
Bistabila kretsar har två stabila tillstånd, och kan alltså lagra 1 bit.</p>
</blockquote>
<h3 id="sr-vippa-sr-latch">SR-vippa (SR latch)</h3>
<p>Två ingångar: SET (<span class="arithmatex">\(S\)</span>) och RESET (<span class="arithmatex">\(R\)</span>)</p>
<p>Om <span class="arithmatex">\(S=0\)</span>, <span class="arithmatex">\(R=0\)</span> minns kretsen det tidigare värdet.<br>
Om <span class="arithmatex">\(S=1\)</span> eller <span class="arithmatex">\(R=1\)</span> ändras tillståndet till <span class="arithmatex">\(Q=1\)</span> resp. <span class="arithmatex">\(Q=0\)</span>.</p>
<p>Problem:</p>
<ul>
<li>Om <span class="arithmatex">\(S=1\)</span> och <span class="arithmatex">\(R=1\)</span> blir både <span class="arithmatex">\(Q\)</span> och <span class="arithmatex">\(\overline Q\)</span> noll.</li>
<li>Blandar <em>vad</em> som uppdateras och <em>när</em> - en utmaning i större kretsar.</li>
</ul>
<h3 id="d-latch">D latch</h3>
<p>Två ingångar: <span class="arithmatex">\(D\)</span> och <span class="arithmatex">\(\text{CLK}\)</span></p>
<p>Tillståndet ändras för att matcha <span class="arithmatex">\(D\)</span> när vippan är transparent (<span class="arithmatex">\(\text{CLK}=1\)</span>):</p>
<table>
<thead>
<tr>
<th><span class="arithmatex">\(\text{CLK}\)</span></th>
<th><span class="arithmatex">\(D\)</span></th>
<th><span class="arithmatex">\(Q\)</span></th>
<th><span class="arithmatex">\(\overline Q\)</span></th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>?</td>
<td><span class="arithmatex">\(Q_\text{pre}\)</span></td>
<td><span class="arithmatex">\({\overline Q}_\text{pre}\)</span></td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>0</td>
<td>1</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>1</td>
<td>0</td>
</tr>
</tbody>
</table>
<h3 id="flip-flops">Flip-flops</h3>
<p>Flip-flops är <em>edge-triggered</em> (till skillnad från SR/D-latches, som är <em>level-triggered</em>).</p>
<h4 id="d-vippa-d-flip-flop">D-vippa (D flip-flop)</h4>
<p>Består av två sammankopplade D-latches (<em>"ledare"</em> och <em>"följare"</em>).</p>
<ol>
<li><span class="arithmatex">\(\overline{\text{CLK}}\)</span>: <span class="arithmatex">\(D_\text{in}\)</span> släpps igenom av ledaren.</li>
<li><span class="arithmatex">\(\text{CLK}\)</span>: Ledaren låses och följaren släpper igenom den nu låsta signalen.</li>
</ol>
<p>Beteende: När <span class="arithmatex">\(\text{CLK}\)</span> går från <em>LOW</em> till <em>HIGH</em> kopieras <span class="arithmatex">\(D\)</span> till <span class="arithmatex">\(Q\)</span>.</p>
<h4 id="resettableenabled-flip-flops">Resettable/enabled flip-flops</h4>
<p>En <em>nollställbar flip-flop</em> sätts till 0 när <span class="arithmatex">\(\text{RESET}\)</span>-signalen är aktiv.</p>
<blockquote>
<p>En <em>synkront nollställbar</em> flip-flop kan endast nollställas i samband med en stigande klocksignal.<br>
En <em>asynkront nollställbar</em> flip-flop kan nollställas obereonde av klockan.</p>
</blockquote>
<p>En <em>aktiverad flip-flop</em> tillåts endast skifta läge om (utöver <span class="arithmatex">\(\text{CLK}\)</span>) även <span class="arithmatex">\(\text{EN}\)</span>-signalen är aktiv.</p>
<h3 id="register">Register</h3>
<p>Ett <span class="arithmatex">\(N\)</span>-bitars <em>register</em> består av <span class="arithmatex">\(N\)</span> stycken flip-flops med gemensam klocka. Register kan, likt enskilda flip-flops, ha <span class="arithmatex">\(\text{EN}\)</span>- och <span class="arithmatex">\(\text{RESET}\)</span>-signaler.</p>
<blockquote>
<p><strong>Output enable (OE)- register:</strong><br>
Består av ett register med en tristate-buffer på utgången. Om <span class="arithmatex">\(\text{OE}=0\)</span> är <span class="arithmatex">\(Q=\text Z\)</span> (flytande), annars är <span class="arithmatex">\(Q=Q_\text{register}\)</span>.</p>
</blockquote>
<h4 id="registerfil">Registerfil</h4>
<p>Tillåter adressering av data genom att kombinera flera register:</p>
<p>En avkodare väljer (beroende på adressen <span class="arithmatex">\(\text{A3}\)</span>) vilket register som, om även <span class="arithmatex">\(\text{WE3}\)</span>, data på <span class="arithmatex">\(\text{WD3}\)</span> skall skrivas till.<br>
En multiplexer väljer (beroende på adresserna <span class="arithmatex">\(\text{RD1},\text{RD2}\)</span>) från vilka två register som data skall läsas till <span class="arithmatex">\(\text{RD1},\text{RD2}\)</span>.<br>
De ingående registren har alla en gemensam klocka.</p>
<h3 id="synkrona-sekventiella-kretsar">Synkrona sekventiella kretsar</h3>
<ul>
<li>Kombinationslogik kombineras med minst ett register.</li>
<li>Kretsens <em>tillstånd</em> ändras enligt en klocka, som är gemensam för alla ingående komponenter.</li>
<li>Varje cyklisk väg innehåller minst ett register.</li>
<li>En synkron sekventiell krets kan definieras som en FSM (finit tillståndsmaskin):<ul>
<li><em>Mealy-maskin:</em> Utdata kan vara direkt beroende av indata (Mealy-maskin).</li>
<li><em>Moore-maskin:</em> Utdata beror endast på tillståndet (dvs. ej direkt på indata).</li>
</ul>
</li>
</ul>
<h4 id="hur-snabbt-kan-vi-kora-en-krets">Hur snabbt kan vi köra en krets?</h4>
<p>Klockperioden måste vara längre än värsta-fallsfördröjningen i kretsen:</p>
<div class="arithmatex">\[\text{delay}=t_\text{prop}+t_\text{combinational}+t_\text{setup}+t_\text{skew}\]</div>
<ul>
<li><span class="arithmatex">\(t_\text{prop}\)</span> är tiden det tar för signalen att färdas genom registret</li>
<li><span class="arithmatex">\(t_\text{combinational}\)</span> är den längsta tidsåtgången för kombinationslogiken</li>
<li><span class="arithmatex">\(t_\text{setup}\)</span> är nödvändig tid före klocksignalens stigning.</li>
<li><span class="arithmatex">\(t_\text{skew}\)</span> är <em>clock skew</em>-kompensation (klocksignaler når olika tillståndselement olika snabbt)</li>
</ul>
<p>Ett <em>race</em> kan uppstå om värdena hos olika tillståndselement beror på den relativa hastigheten hos kretsens logiska element.</p>
<h2 id="forelasning-9-alu-och-encykelprocessor">Föreläsning 9: ALU och encykelprocessor</h2>
<h3 id="alu-aritmetisk-logisk-enhet">ALU (aritmetisk logisk enhet)</h3>
<p>Utför aritmetiska/logiska operationer på två N-bitarsvärden <span class="arithmatex">\(A\)</span> och <span class="arithmatex">\(B\)</span>. Vilken operation som utförs beror på ingångssignalen <span class="arithmatex">\(F\)</span>.</p>
<p>En ALU kan också ge statusflaggor såsom overflow, nollflagga, etc.</p>
<h3 id="data-path-i-encykelprocessorer">Data path (i encykelprocessorer)</h3>
<ul>
<li>Arkitekturellt tillstånd:<ul>
<li>Programräknare (ett 32-bitarsregister som adderas med 4 varje klockcykel)</li>
<li>32 inbyggda register</li>
</ul>
</li>
<li>Instruktions- och dataminne</li>
<li>Register, ALU och multiplexrar</li>
</ul>
<p>Läsning från registerfilen, instruktionsminnet och dataminnet sker kombinationellt - oberoende av klockcykel.
När adressen ändras, gör även data på läsporten det direkt efter kretsens fortplantningstid. Skrivning av register/dataminne sker dock vid stigande klocksignal.</p>
<h3 id="kontrollenhet-i-encykelprocessor">Kontrollenhet (i encykelprocessor)</h3>
<p>Läser nuvarande instruktion från datapath, och talar, utgåendes från denna information, om för datapath hur en instruktion utförs, det vill säga väljer t.ex. multiplexer-port och om skrivning skall aktiveras i minnet (<code>sw</code>-instruktioner).<br>
En kontrollenhet kan t.ex. delas upp i en huvuddel och en ALU-avkodare.</p>
<p>Styr följande <em>kontrollsignaler</em>:</p>
<ul>
<li>ImmSrc: hur immediate-värdet skall tolkas (dess bitar är utspridda på olika sätt i olika instruktioner)</li>
<li>ALUSrc: varifrån värden till ALU:n skall hämtas ifrån (2 register eller 1 register + immediate)</li>
<li>ALUControl: vilket ALU-operation som skall utföras</li>
<li>RegWrite: huruvida data skall skrivas till registerfilen</li>
<li>MemWrite: huruvida data skall skrivas till minnet</li>
<li>ResultSrc: varifrån resultatet, som ev. sedansparas i registret, ska hämtas ifrån (minnets läsport eller direkt från ALU:en)</li>
<li>Branch: Om en branch skall genomföras</li>
</ul>
<h3 id="prestanda">Prestanda</h3>
<p>Det största problemet med en encykelsdesign är den långa kritiska vägen, då vissa instruktioner tar lång tid.
I och med synkron logik kommer klockhastigheten att begränsas av detta.</p>
<h2 id="forelasning-10-pipeline-processorer">Föreläsning 10: Pipeline-processorer</h2>
<h3 id="begrepp">Begrepp</h3>
<ul>
<li><strong>Processing system:</strong> Ett system som behandlar data.</li>
<li><strong>Token:</strong> En datapunkt som hanteras av systemet och leder till utdata.</li>
<li><strong>Latens:</strong> Tidsåtgång för att hantera en token.</li>
<li><strong>Throughput:</strong> Antalet tokens som kan behandlas per tidsenhet.</li>
</ul>
<h3 id="parallellism-och-pipelining">Parallellism och pipelining</h3>
<p>Exempel: En fabrik med två maskiner, som sköter två olika processer.</p>
<ul>
<li><strong>Sekventiell hantering:</strong> En token i taget, sekventiellt. Någon maskin "vilar" alltid.</li>
<li><strong>Parallell hantering (spatial parallellism):</strong> Lägg till ytterligare par maskiner för att öka produktionstakten. 50% av maskinerna nyttjas i taget.</li>
<li><strong>Pipelining (temporal parallellism):</strong> Endast två maskiner - men processerna schemaläggs så att den långsammaste processen pågår konstant, och går direkt från en token till nästa. Den andra maskinen påbörjar sitt arbete när den första är färdig.<ul>
<li>Särskilda "pipeline-register" placeras mellan olika "block" av kombinationslogik. Registren förhindrar att tokens från olika pipeline-steg påverkar varandra.</li>
<li>Minimerar väntetid.</li>
<li>Throughput avgörs av den maskinen som tar längst tid.</li>
<li>Instruktioner/cykel förbättras inte (minskar t.o.m. lite) - men den kritiska vägen (och därmed cykelperioden) blir kortare.</li>
<li>Datapath kan delas in i steg: hämta (F), avkoda (D), beräkna (E), läsa/skriva minne (M) och spara i register (W).<ul>
<li>Obs! För att beräkningsresultatetet skall sparas i det register som angavs i den aktuella instruktionen (och inte i något angivet av efterföljande instruktioner) måste registernumret (adressen) <em>vidarebefordras</em> till detta steg.</li>
<li>Ytterligare problem: Programräknaren (PC) förändras oförutsägbart av branch-instruktioner.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="data-och-kontrollfaror">Data- och kontrollfaror</h3>
<p>Om det finns inbördes beroenden mellan instruktioner i en sekvens uppstår en datafara (om pipeline då fylls kan resultat bli oväntat).</p>
<ul>
<li>
<p><strong>DATA: Read after write (RAW):</strong> En instruktion försöker läsa ett register som ännu inte skrivits till.</p>
<ul>
<li>Möjlig lösning: Forwarning. Beräkningsresultatet vidarebefordras direkt till beräkningssteget (E) för nästa instruktion.<ul>
<li>Det beräknade värdet vidarebefordras av en <em>hazard unit</em>.</li>
<li>Fungerar ej om nödvändig data inte är tillgänglig ännu. Data hämtad med <code>lw</code> t.ex. inte tillgänglig förrän steg 4 (M).</li>
</ul>
</li>
<li>Alternativt: Stalling tills forwarding är möjligt. Leder till &lt;1 instruktioner/cykel.<ul>
<li>Exekveringen pausas tills resultatet från den tidigare instruktionen är tillgängligt.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>KONTROLL: Anta branch ej tagen:</strong> Om en branch tas upptäcks detta först i minnes-steget - pipeline måste då spolas.</p>
<ul>
<li>Möjlig lösning: Flytta branch-adressberäkning till avkodningssteget och hantera <code>beq</code> redan där.<ul>
<li>Kan leda till nya datafaror (om operander inte är tillgängliga i avkodningssteget) - löses med forwarding eller stalling.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="antalet-pipeline-steg">Antalet pipeline-steg</h3>
<ul>
<li>Många steg ger en kortare kritisk väg (möjliggör högre klockfrekvens).</li>
<li>Problem: Högre strömförbrukning, mer hårdvara (register) och dyrare branch mispredictions.</li>
</ul>
<h4 id="hur-minimera-branch-mispredictions">Hur minimera branch mispredictions?</h4>
<ul>
<li><em>Statiska branch predictors</em> förutspår vid kompilering om en branch kommer att tas.<br></li>
<li><em>Dynamiska branch predictors</em> använder en <em>branch target buffer</em> (information om hur tidigare branch-instruktioner fallit ut).<ul>
<li>1-bit: Antar att utfallet är lika nästa gång. För loopar ger detta fel i första och sista iterationen.</li>
<li>2-bit: 4 tillstånd (starkt tagen, tagen, ej tagen, starkt ej tagen). Fel endast i slutet av en loop.</li>
</ul>
</li>
</ul>
<h2 id="forelasning-11-minneshierarki">Föreläsning 11: Minneshierarki</h2>
<h3 id="instruktions-och-dataminne">Instruktions- och dataminne</h3>
<p>Vi antog tidigare att varje minnesåtkomst tar 1 cykel - detta är sant endast för små minnen eller långsamma processorer.
Normalt kommer tidsåtgången motsvara mer än 1 klockcykel.</p>
<ul>
<li>RAM (<em>Random Access Memory</em>): Volatilt (strömavbrott = dataförlust) och konstant läs/skrivtid.</li>
<li>ROM (<em>Read-Only Memory</em>): Icke-volatilt. Obs: Idag ofta skrivbart.</li>
</ul>
<p>Minnesteknologi:</p>
<ul>
<li>SRAM (statiskt RAM): Enkel integrerad krets. Snabbt men dyrt.</li>
<li>DRAM (dynamiskt RAM): Kondensatorer. Laddning tappas snabbt &amp; måste därför ständigt "uppdateras". En transistor per bit - billigare, men långsammare, än SRAM.<ul>
<li>SDRAM (synkront DRAM): Data överförs i bursts (följer en klocka).<ul>
<li>DDR (<em>double data rate</em>) - Dataöverföring både vid stigande och fallande klocksignal.</li>
</ul>
</li>
</ul>
</li>
<li>Flashminne (EEPROM, SSD) &amp; magnetiska diskar (HDD).</li>
</ul>
<p>Vi behöver alltså hitta sätt att optimera prestanda utan stora kostnader.</p>
<h3 id="temporalspatial-narhet">Temporal/spatial närhet</h3>
<ul>
<li>Temporal närhet: Minne som tidigare använts tenderar att användas igen.</li>
<li>Spatial närhet: Minne på närliggande adresser tenderar att användas.</li>
</ul>
<div class="arithmatex">\[\text{AMAT}=t_\text{cache}+\text{MR}_\text{cache}\left(t_\text{MM}+\text{MR}_\text{MM}\cdot t_\text{VM}\right)\]</div>
<h3 id="caching">Caching</h3>
<p>Två sorters cacheminnen: instruktions- resp. datacache (kombineras ibland).</p>
<p><em>Cacheträff:</em> Efterfrågad data finns i cache.<br>
<em>Cachemiss:</em> Finns ej i cache - data hämtas från huvudminnet.</p>
<p>För att nå en hög träffrekvens utnyttjar vi temporal och spatial närhet.</p>
<ul>
<li>Kapacitet (C): Totala mängd data som ryms i cachen.</li>
<li>Antal set (S): Hur många set cachen har. Varje sådant består av ett eller flera block.</li>
<li>Blockstorlek (b): Kapacitet hos ett datablock.</li>
<li>Antal block (B): Totalt antal block. Minst lika med antalet set (<span class="arithmatex">\(B=N\cdot S\)</span>).<ul>
<li>När data hämtas från minnet, hämtas ett helt block (cacherad) åt gången.</li>
</ul>
</li>
<li>Associativitetsgrad (N): <span class="arithmatex">\(N=\frac BS\)</span>. Antal block per set.</li>
</ul>
<p>Varje adress är bunden till ett set, och data kan sparas i vilket helst av dess <span class="arithmatex">\(N\)</span> block.</p>
<h4 id="direct-mapped-cache">Direct-mapped cache</h4>
<p>I en <em>direct-mapped cache</em> är <span class="arithmatex">\(S=B\)</span>, dvs. ett block per set (<span class="arithmatex">\(N=1\)</span>).</p>
<p>En minnesadress kan då delas in i olika fält, t.ex.:</p>
<table>
<thead>
<tr>
<th>Tagg</th>
<th>Set (<em>index</em>)</th>
<th>Byte offset</th>
</tr>
</thead>
<tbody>
<tr>
<td>11...111</td>
<td>101</td>
<td>00</td>
</tr>
</tbody>
</table>
<ul>
<li>Tagg: Början av adressen. Unikt för varje adress inom ett set - lagras i början av varje block, omedelbart efter <em>valid</em>-biten.</li>
<li>Index: Vilket <em>set</em> (rad) i cacheminnet adressen tillhör.</li>
<li>Byte offset: Anger byte# inuti blocket.</li>
</ul>
<p>Om ingen konflikt uppstår i mappingen, och cachen är tom i början av ett program, inträffar cachemissar endast de gånger nytt minne behöver hämtas.</p>
<p>Om data behöver hämtas från två olika adresser som delar <em>set</em> inträffar en <em>kollision</em>. Om två sådana adresser läses om vartannat
kan missfrekvensen nå 100%.</p>
<h4 id="n-vags-set-associativ-cache">N-vägs set-associativ cache</h4>
<p>Reducerar antalet kollisioner genom att låta varje <em>set</em> bestå av <span class="arithmatex">\(N\)</span> st block.</p>
<p>Nackdel: Långsammare och kräver mer hårdvara. Adressens <em>tagg</em> behöver jämföras med alla taggar (<span class="arithmatex">\(N\)</span> stycken) som sparats i dess motsvarande <em>set</em>.</p>
<p>Lägst missfrekvens fås med ett <em>fully associative cache</em> (<span class="arithmatex">\(N=B,S=1\)</span>).</p>
<p>Varje block ser ut som följer:</p>
<table>
<thead>
<tr>
<th>Giltig?</th>
<th>Tagg</th>
<th>Data</th>
</tr>
</thead>
<tbody>
<tr>
<td>&lt;1 bit&gt;</td>
<td>&lt;28 bitar&gt;</td>
<td>&lt;32 bitar&gt;</td>
</tr>
</tbody>
</table>
<h4 id="ersattningspolicy">Ersättningspolicy</h4>
<ul>
<li><em>Direct mapped cache:</em> Om ett set är upptaget måste data bytas ut.</li>
<li><em>N-vägs set-associativ cache:</em> (förutsatt <span class="arithmatex">\(N\gt1\)</span>)<ul>
<li>Least recently used (LRU): Enkelt att implementera för <span class="arithmatex">\(N=2\)</span> genom att lägga till en "används"-bit.</li>
<li>Pseudo-LRU (för <span class="arithmatex">\(N\gt2\)</span>): Ett set delas upp i två grupper - ett slumpmässigt block i den minst nyligen använda gruppen ersätts.</li>
<li>FIFO</li>
<li>Slumpmässig ersättning</li>
</ul>
</li>
</ul>
<h4 id="flerniva-cache">Flernivå-cache</h4>
<p>Processorer kan ha flera cacheminnen: T.ex. L1 (snabbare), L2 och L3 (större).</p>
<h4 id="skriv-policy">Skriv-policy</h4>
<ul>
<li><em>Write-through</em>: Data skrivs till huvudminnet samtidigt.</li>
<li><em>Write-back</em>: En "dirty"-bit sätts vid skrivning. Data skrivs tillbaka när cacheblocket behövs för ny data.</li>
</ul>
<h3 id="virtuellt-minne">Virtuellt minne</h3>
<p>Långsamt (använder hårddisken), men stort och tillåter bättre minnessäkerhet (varje process har ett eget minnesutrymme).</p>
<p>Det virtuella minnet är indelat i virtuella <em>pages</em> (vanligtvis 4 KiB stora). Dessa kan finnas i det fysiska minnet (DRAM) eller
på hårddisken (i <em>swap-utrymmet</em>). När ett program använder virtuellt minne, översätts den virtuella adressen till en fysisk adress. Om processorn försöker
komma åt virtuellt minne som inte finns i det fysiska minnet inträffar en <em>page fault</em>, och operativsystemet hämtar data från hårddisken.</p>
<p>Det fysiska minnet fungerar som en fullständigt associativ cache (<span class="arithmatex">\(N=B\)</span>) för det virtuella minnet.</p>
<ul>
<li>Översättningen görs av en memory management unit (MMU):</li>
<li>Till hjälp finns ett <em>page-tabell</em>, som översätter VPN (virtuellt page number) till PPN (fysiskt PN). Page offset behöver inte översättas.<ul>
<li>Varje rad i page-tabellen består av en <code>valid</code>-bit, ett PPN och ett VPN.</li>
<li>Page-tabellen lagras i det fysiska (RAM-) minnet.</li>
<li>Operativsystemet ansvarar för att uppdatera page-tabellen, samt för att flytta data mellan minne och disk.</li>
</ul>
</li>
<li>I hårdvara finns även en <em>translation lookaside buffer</em> (TLB), som cachar nyligen använda pages.</li>
</ul>
<p>Minnessäkerhet: Varje process tilldelas en egen virtuell adressrymd.</p>
<p>Som skriv-policy används write-back. Att ersätta en fysisk page i minnet kallas för <em>paging</em>. Virtuellt minne använder en LRU-liknance policy där <code>använd</code>-bitarna regelbundet nollställs.</p>
<h2 id="forelasning-12-parallellism-samtidighet-uppsnabbning-och-ilp">Föreläsning 12: Parallellism, samtidighet, uppsnabbning och ILP</h2>
<ul>
<li><em>Multiprocessor:</em> Ett datorsystem med två eller fler processorer.<ul>
<li><em>Flerkärnig processor:</em> En multiprocessor där alla processorer (kärnor) är integrerade i samma krets.</li>
</ul>
</li>
<li><em>Kluster:</em> Flera datorer sammanlänkade via ett LAN - kan betraktas som en multiprocessor.</li>
</ul>
<h3 id="parallellism-eller-samtidighet">Parallellism eller samtidighet?</h3>
<blockquote>
<p><em>Parallellism:</em> Att <em>utföra</em> flera saker <em>parallellt</em> (hårdvaruperspektiv).<br>
<em>Samtidighet:</em> Att <em>hantera</em>/"jonglera" flera saker samtidigt (mjukvaruperspektiv).</p>
</blockquote>
<table>
<th><td>&nbsp;</td><td id="pts" colspan="3" style="text-align: center;">Mjukvara</td></th>
<tr><td colspan="2">&nbsp;</td><td id="ptseq" style="text-align: center;">Sekventiellt</td><td id="ptcon" style="text-align: center;">Samtidigt</td></tr>
<tr><td rowspan="2" style="vertical-align: middle; text-align: center;"><span style="writing-mode: sideways-lr;">Hårdvara</span></td><td>Seriell</td><td headers="ptseq pts">Matrismultiplikation, enkärnig processor (en process)</td><td headers="ptcon pts">Linux, enkärnig processor (många processer)</td></tr>
<tr><td>Parallell</td><td headers="ptseq pts">Matrismultiplikation, flerkärnig processor (en process)</td><td headers="ptcon pts">Linux, flerkärnig processor (många processer)</td></tr>
</table>

<h4 id="speedup-vid-parallellisering">Speedup vid parallellisering</h4>
<div class="arithmatex">\[\text{Speedup}=\frac{T_\text{före}}{T_\text{efter}}\]</div>
<ul>
<li>Superlinjär speedup: Felmätning eller en cache-effekt.</li>
<li>Idealt (linjärt): <span class="arithmatex">\(\text{Speedup}\propto\text{antal processorer}\)</span></li>
</ul>
<p>Fara: <em>Relativ speedup</em> mäter bara <em>samma</em> program. <em>Verklig speedup</em> jämför istället med det bästa kända sekventiella programmet.</p>
<h4 id="amdahls-lag">Amdahls lag</h4>
<blockquote>
<p><em>Att förbättra prestandan hos ett subsystem är mödan värd endast om subsystemet påverkar en stor del av den totala prestandan.</em></p>
</blockquote>
<p>Exekveringstiden <span class="arithmatex">\(T_\text{före}\)</span> kan delas upp i två delar, beroende på vilka delar som förbättras av parallellisering:</p>
<div class="arithmatex">\[T_\text{före}=T_\text{förbättringsbar}+T_\text{konstant}\]</div>
<p>Speedup kan då beräknas enligt <em>Amdahls lag</em>:</p>
<div class="arithmatex">\[\text{Speedup}=\frac{T_\text{före}}{T_\text{efter}}=\frac{T_\text{före}}{\frac{T_\text{förbättringsbar}}N+T_\text{konstant}}\]</div>
<p>där <span class="arithmatex">\(N\)</span> är förbättringsfaktorn.</p>
<p>Om den parallelliseringsbara andelen <span class="arithmatex">\(p\)</span> är känd:</p>
<div class="arithmatex">\[\text{Speedup}=\frac1{\frac pN+(1-p)}\]</div>
<blockquote>
<p><strong>Stark skalning:</strong> Mät speedup utan att förändra problemstorlek.<br>
<strong>Svag skalning:</strong> Mät speedup när problemstorleken växer proportionellt med antalet processorer (Gustafsons lag).</p>
</blockquote>
<h3 id="parallellism">Parallellism</h3>
<ul>
<li><em>Datanivå-parallellism (DLP):</em> Flera dataobjekt kan behandlas simultant. T.ex. flera bönder klipper flera får.</li>
<li><em>Uppgiftsnivå-parallellism (TLP):</em> Flera olika uppgifter kan utföras samtidigt och parallellt. T.ex. flera bönder arbetar samtidigt, med olika uppgifter.</li>
</ul>
<h4 id="sisd-simd-mimd">SISD, SIMD, MIMD</h4>
<table>
<th><td>&nbsp;</td><td id="ptd" colspan="3" style="text-align: center;">Dataströmmar</td></th>
<tr><td colspan="2">&nbsp;</td><td id="ptone" style="text-align: center;">En</td><td id="ptmul" style="text-align: center;">Flera</td></tr>
<tr><td rowspan="2" style="vertical-align: middle; text-align: center;"><span style="writing-mode: sideways-lr;">Instruktionsströmmar</span></td><td>En</td><td headers="ptone ptd">SISD<br>(t.ex. i386)</td><td headers="ptmul ptd">SIMD<br>(t.ex. SSE-instruktioner)</td></tr>
<tr><td>Flera</td><td headers="ptone ptd">MISD<br>(t.ex. redundans i flygdator)</td><td headers="ptmul ptd">MIMD<br>(t.ex. flerkäriga processorer)</td></tr>
</table>

<p>Grafikprocessorer är både SIMD och MIMD.</p>
<h3 id="instruktionsniva-parallellism-ilp">Instruktionsnivå-parallellism (ILP)</h3>
<p>Kan förbättra prestanda utan att involvera programmeraren.</p>
<p>Två vägar: pipelines och <em>multiple issue</em>.</p>
<h4 id="multiple-issue">Multiple issue</h4>
<p>Utfärda flera instruktioner i varje cykel. Utmaning: beroenden och data-/kontrollfaror.</p>
<ul>
<li><em>Statiskt:</em> Kompilatorn planerar instruktionsordningen. T.ex. VLIW (Very Long Instruction Word)<ul>
<li>VLIW (Very Long Instruction Word): Använder <em>issue-paket</em> (~flera sammanslagna instruktioner).<ul>
<li>Kräver flera registerportar, läsning av flera instruktioner i taget och extra ALU:er.</li>
<li>För att undvika faror infogar ibland kompilatorn en no-op (<em>no operation</em>).</li>
</ul>
</li>
</ul>
</li>
<li><em>Dynamiskt:</em> S.k. <em>superskalära processorer</em> utfärdar instruktioner dynamiskt. En superskalär processor består av flera uppsättningar av datapath-hårdvara.
        1. En batch instruktioner hämtas och avkodas <em>i ordning</em>.
        2. <strong>Reserveringsstationer (RS)</strong> buffrar operander till de funktionella enheterna. Databeroenden hanteras dynamiskt.
        3. <strong>Funktionella enheter (FU)</strong> (t.ex. heltalsenhet, load/store-enhet) exekverar instruktionerna.
        4. Resultat skickas tillbaka till en RS (vid behov), och till commit-enheten.
        5. <strong>Commitenheten (CU)</strong> genomför ändringar i registret, med hänsyn till den önskade ordningen (s.k. <em>in-order commit</em>).</li>
</ul>
<h5 id="out-of-order-exekvering">Out-of-order-exekvering</h5>
<p>Vissa superskalära processorar kan ändra exekveringsordningen (s.k. <em>out-of-order-processorer</em>).</p>
<blockquote>
<p><strong>WAR-beroenden:</strong><br>
Om ett WAR (write after read)-beroende finns mellan två instruktioner, uppstår en fara om vi utan vidare ändrar ordningen (skrivning måste ske <em>efter</em> läsning!).</p>
<p><em>Lösning: Register renaming</em><br>
Processorn skriver till ett <em>renaming register</em> istället - faran undviks. Processorn håller koll på det omdöpta registret.</p>
</blockquote>
<p>VLIW-processorer är ofta <em>mer energieffektiva</em> än superskalära out-of-order-processorer (mindre hårdvara + kompilatorn gör jobbet).</p>
<h2 id="forelasning-13-simd-mimd-och-parallellprogrammering">Föreläsning 13: SIMD, MIMD och parallellprogrammering</h2>
<h3 id="subword-parallellism-multimediatillagg">Subword-parallellism &amp; multimediatillägg</h3>
<p><em>Subword-parallellism:</em> (SIMD) <em>En instruktion</em> opererar <em>parallellt</em> på flera ord - t.ex. vektorinstruktioner i SSE.</p>
<h3 id="flertradning">Flertrådning</h3>
<p>En process består av en eller flera trådar som körs samtidigt/parallellt.</p>
<h3 id="flertradade-processorer">Flertrådade processorer</h3>
<p>I en flertrådad processor delar flera hårdvarutrådar på de funktionella enheterna.
Processorn innehåller hårdvara för flera parallella funktionella tillstånd, vilket tillåter en annan tråd att utfärda instruktioner när en första hamnar i en stall.</p>
<blockquote>
<p>Flertrådning förbättrar inte prestandan hos de enskilda trådarna, då ILP inte förbättras.
Däremot förbättras processorns totala throughput, eftersom processortid kan nyttjas mer effektivt genom flera trådar.</p>
</blockquote>
<p><em>Syftet med flertrådning är att göra latens mindre märkbar samt undvika stalls till följd av cache-missar.</em></p>
<ul>
<li><em>Coarse-grained flertrådning:</em> Byter tråd endast vid kostsamma stalls, t.ex. L3-cachemissar.</li>
<li><em>Fine-grained flertrådning:</em> Byter tråd varje cykel -- nyttjar resurserna bättre.</li>
</ul>
<h4 id="simultan-flertradning-smt">Simultan flertrådning (SMT)</h4>
<p>Kombinerar flertrådning med en multiple-issue, dynamiskt schemalagd pipeline.
Kan täcka de luckor som multiple-issue inte kan fylla, genom att lägga till instruktioner från andra hårdvarutrådar.</p>
<p><strong>Exempel:</strong> Intels Hyper-Threading.</p>
<h3 id="mimd-flerkarnighet-och-kluster">MIMD, flerkärnighet och kluster</h3>
<p>En <em>shared memory multiprocessor (SMP)</em> har en gemensam adressrymd för samtliga processorer. Processorerna kommunikcerar via delat minne.
<em>En SMP är nästan alltid detsamma som en flerkärning processor</em>.</p>
<ul>
<li>Uniform memory access (UMA)-multiprocessor: Samma latens vid minnesåtkomst från samtliga processorer.</li>
<li>Nonuniform memory access (NUMA)-multiprocessor: Minne kan partitioneras mellan processorer. Kan ge olika latens.</li>
</ul>
<h4 id="cache-coherence">Cache coherence</h4>
<blockquote>
<p><strong>Cache coherencency problem:</strong>
De enskilda kärnornas <em>lokala</em> cacheminnen kan innehålla olika värden för samma minnesadress.</p>
</blockquote>
<p>Cache coherence kan säkerställas med ett <em>write invalidate-protokoll</em>, t.ex. <em>snooping-protokollet</em>:</p>
<ul>
<li>När en kärna skriver till en minnesadress görs motsvarande cache-data på övriga kärnor ogiltig.</li>
</ul>
<h5 id="false-sharing">False sharing</h5>
<p>Om två kärnor har motsvarande cache lines, och de samtidigt modifierar olika delar av den, kommer cache coherence-protokollet att ogiltig-markera båda cache-linjerna, trots att kärnorna egentligen inte är intresserade av samma data.</p>
<h3 id="programmering-med-tradar-och-delade-variabler">Programmering med trådar och delade variabler</h3>
<h4 id="semafor">Semafor</h4>
<p>En <em>semafor</em> är en icke-negativ global heltalsvariabel som enbart kan förändras genom två operationer:</p>
<ul>
<li><span class="arithmatex">\(P(s)\)</span> dekrementerar <span class="arithmatex">\(s\)</span> så snart som det är möjligt och returnerar därefter.</li>
<li><span class="arithmatex">\(V(s)\)</span> inkrementerar <span class="arithmatex">\(s\)</span>.</li>
</ul>
<h4 id="mutex">Mutex</h4>
<p>En <em>mutex</em> är en sorts binär semafor med det initala värdet 1, som används för att säkerställa att en delad resurs används av högst en tråd åt gången. <span class="arithmatex">\(P\)</span> = "lås", <span class="arithmatex">\(V\)</span> = "lås upp".</p>
<div class="language-c highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;pthread.h&gt;</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;semaphore.h&gt;</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="k">volatile</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">counter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="n">sem_t</span><span class="w"> </span><span class="o">*</span><span class="n">mutex</span><span class="p">;</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="nf">count</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="p">){</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="p">((</span><span class="kt">int</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">data</span><span class="p">);</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">max</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="w">        </span><span class="n">sem_wait</span><span class="p">(</span><span class="n">mutex</span><span class="p">);</span><span class="w"> </span><span class="c1">// P</span>
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="w">        </span><span class="n">counter</span><span class="o">++</span><span class="p">;</span>
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="w">        </span><span class="n">sem_post</span><span class="p">(</span><span class="n">mutex</span><span class="p">);</span><span class="w"> </span><span class="c1">// V</span>
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="w">    </span><span class="p">}</span>
</span><span id="__span-6-16"><a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="w">    </span><span class="n">pthread_exit</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
</span><span id="__span-6-17"><a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a><span class="p">}</span>
</span><span id="__span-6-18"><a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>
</span><span id="__span-6-19"><a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(){</span>
</span><span id="__span-6-20"><a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a><span class="w">    </span><span class="n">pthread_t</span><span class="w"> </span><span class="n">tid1</span><span class="p">,</span><span class="w"> </span><span class="n">tid2</span><span class="p">;</span>
</span><span id="__span-6-21"><a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">max1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">400000</span><span class="p">;</span>
</span><span id="__span-6-22"><a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">max2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">600000</span><span class="p">;</span>
</span><span id="__span-6-23"><a id="__codelineno-6-23" name="__codelineno-6-23" href="#__codelineno-6-23"></a>
</span><span id="__span-6-24"><a id="__codelineno-6-24" name="__codelineno-6-24" href="#__codelineno-6-24"></a><span class="w">    </span><span class="n">mutex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sem_open</span><span class="p">(</span><span class="s">&quot;/semaphore&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">O_CREAT</span><span class="p">,</span><span class="w"> </span><span class="mo">0777</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"> </span><span class="c1">// skapa en semafor</span>
</span><span id="__span-6-25"><a id="__codelineno-6-25" name="__codelineno-6-25" href="#__codelineno-6-25"></a>
</span><span id="__span-6-26"><a id="__codelineno-6-26" name="__codelineno-6-26" href="#__codelineno-6-26"></a><span class="w">    </span><span class="c1">// Semaforen tas bort när alla trådar som öppnat den anropar `sem_close`.</span>
</span><span id="__span-6-27"><a id="__codelineno-6-27" name="__codelineno-6-27" href="#__codelineno-6-27"></a><span class="w">    </span><span class="n">sem_unlink</span><span class="p">(</span><span class="s">&quot;/sempahore&quot;</span><span class="p">);</span>
</span><span id="__span-6-28"><a id="__codelineno-6-28" name="__codelineno-6-28" href="#__codelineno-6-28"></a>
</span><span id="__span-6-29"><a id="__codelineno-6-29" name="__codelineno-6-29" href="#__codelineno-6-29"></a><span class="w">    </span><span class="c1">// Starta två trådar</span>
</span><span id="__span-6-30"><a id="__codelineno-6-30" name="__codelineno-6-30" href="#__codelineno-6-30"></a><span class="w">    </span><span class="n">phtread_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tid1</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">count</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">max1</span><span class="p">);</span>
</span><span id="__span-6-31"><a id="__codelineno-6-31" name="__codelineno-6-31" href="#__codelineno-6-31"></a><span class="w">    </span><span class="n">pthread_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tid2</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">count</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">max2</span><span class="p">);</span>
</span><span id="__span-6-32"><a id="__codelineno-6-32" name="__codelineno-6-32" href="#__codelineno-6-32"></a>
</span><span id="__span-6-33"><a id="__codelineno-6-33" name="__codelineno-6-33" href="#__codelineno-6-33"></a><span class="w">    </span><span class="c1">// Vänta på att båda avslutas</span>
</span><span id="__span-6-34"><a id="__codelineno-6-34" name="__codelineno-6-34" href="#__codelineno-6-34"></a><span class="w">    </span><span class="n">pthread_join</span><span class="p">(</span><span class="n">tid1</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
</span><span id="__span-6-35"><a id="__codelineno-6-35" name="__codelineno-6-35" href="#__codelineno-6-35"></a><span class="w">    </span><span class="n">pthread_join</span><span class="p">(</span><span class="n">tid2</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
</span><span id="__span-6-36"><a id="__codelineno-6-36" name="__codelineno-6-36" href="#__codelineno-6-36"></a>
</span><span id="__span-6-37"><a id="__codelineno-6-37" name="__codelineno-6-37" href="#__codelineno-6-37"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;counter = %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">counter</span><span class="p">);</span>
</span><span id="__span-6-38"><a id="__codelineno-6-38" name="__codelineno-6-38" href="#__codelineno-6-38"></a>
</span><span id="__span-6-39"><a id="__codelineno-6-39" name="__codelineno-6-39" href="#__codelineno-6-39"></a><span class="w">    </span><span class="c1">// Stäng semaforen</span>
</span><span id="__span-6-40"><a id="__codelineno-6-40" name="__codelineno-6-40" href="#__codelineno-6-40"></a><span class="w">    </span><span class="n">sem_close</span><span class="p">(</span><span class="n">mutex</span><span class="p">);</span>
</span><span id="__span-6-41"><a id="__codelineno-6-41" name="__codelineno-6-41" href="#__codelineno-6-41"></a>
</span><span id="__span-6-42"><a id="__codelineno-6-42" name="__codelineno-6-42" href="#__codelineno-6-42"></a><span class="w">    </span><span class="c1">// Semaforen tas nu bort eftersom ingen tråd längre håller den öppen</span>
</span><span id="__span-6-43"><a id="__codelineno-6-43" name="__codelineno-6-43" href="#__codelineno-6-43"></a>
</span><span id="__span-6-44"><a id="__codelineno-6-44" name="__codelineno-6-44" href="#__codelineno-6-44"></a><span class="w">    </span><span class="n">pthread_exit</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span><span class="w"> </span><span class="c1">// Låt andra trådar fortsätta?</span>
</span><span id="__span-6-45"><a id="__codelineno-6-45" name="__codelineno-6-45" href="#__codelineno-6-45"></a><span class="p">}</span>
</span></code></pre></div>
<h2 id="ovrigt-fran-kursboken">Övrigt (från kursboken)</h2>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Kopierat till urklipp", "clipboard.copy": "Kopiera till urklipp", "search.result.more.one": "1 till p\u00e5 denna sida", "search.result.more.other": "# till p\u00e5 denna sida", "search.result.none": "Inga s\u00f6kresultat", "search.result.one": "1 s\u00f6kresultat", "search.result.other": "# s\u00f6kresultat", "search.result.placeholder": "Skriv s\u00f6kord", "search.result.term.missing": "Saknas", "select.version": "V\u00e4lj version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.83f73b43.min.js"></script>
      
        <script src="../js/katex.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>